<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test grille 2 zines</title>
<style>
  body { font-family: Arial; padding: 20px; text-align: center; }
  .grid { display: grid; grid-template-columns: repeat(2, 80px); grid-gap: 10px; justify-content:center; margin-top:20px;}
  .cell { width:80px; height:80px; display:flex; align-items:center; justify-content:center; font-weight:bold; border-radius:5px; cursor:pointer; transition:0.2s; font-size:14px; }
  .avail { background:#66d46a; color:#000; }
  .sold { background:#dd4444; color:#fff; cursor:not-allowed; }
  .cell:hover { transform: scale(1.05); }
</style>
</head>
<body>
<h3>Test grille â€” 2 zines</h3>
<div id="grid" class="grid"></div>
<div>ðŸŸ© disponible â€” ðŸŸ¥ vendu</div>

<script>
const SHEET_ID = "1SPveQ_n0mnJWkhf8KCI7_HA2-6EIzkuCsSL1NElKGIk"; // <- remplace ici
const SHEET_URL = `https://docs.google.com/spreadsheets/d/$1SPveQ_n0mnJWkhf8KCI7_HA2-6EIzkuCsSL1NElKGIk/gviz/tq?tqx=out:json&sheet=Feuille%201`;

async function loadGrid() {
  const res = await fetch(SHEET_URL);
  const text = await res.text();
  const jsonText = text.replace(/^[^\(]*\(|\);?$/g,"");
  const data = JSON.parse(jsonText);
  const rows = data.table.rows.map(r => r.c.map(cell => cell ? cell.v : ""));

  const grid = document.getElementById("grid");
  grid.innerHTML = "";
  rows.slice(1).forEach(r => {
    const id = r[0];
    const numero = r[1];
    const link = r[2];
    const status = (r[3]||"").toLowerCase();

    const cell = document.createElement("div");
    cell.className = "cell " + (status === "vendu" ? "sold" : "avail");
    cell.textContent = numero; // <-- affiche le numÃ©ro du zine
    if (status !== "vendu") cell.onclick = () => window.open(link, "_blank");

    grid.appendChild(cell);
  });
}

// premier chargement et rafraÃ®chissement toutes les 8s
loadGrid();
setInterval(loadGrid, 8000);
</script>
</body>
</html>
